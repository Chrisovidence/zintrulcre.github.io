<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Zhengyu Chen">
    <meta name="description" content="ZintrulCre @ 尾張">
    <meta name="keywords" content="ZintrulCre, 尾張">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="LeetCode 位运算"/>
<meta name="twitter:description" content="LeetCode 位运算 位运算包括： 与 &amp; 或 | 异或 ^ 取反 ~ 左移 &laquo; 右移 &raquo; 技巧 移位运算 x &laquo; 1：算数左移 数字的二进制表示的所有位向左移动一位，相当于乘以 2 在右边补 0"/>

    <meta property="og:title" content="LeetCode 位运算" />
<meta property="og:description" content="LeetCode 位运算 位运算包括： 与 &amp; 或 | 异或 ^ 取反 ~ 左移 &laquo; 右移 &raquo; 技巧 移位运算 x &laquo; 1：算数左移 数字的二进制表示的所有位向左移动一位，相当于乘以 2 在右边补 0" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zintrulcre.vip/posts/leetcode/bitmanipulation/" />
<meta property="article:published_time" content="2019-06-19T19:26:39+10:00" />
<meta property="article:modified_time" content="2019-06-19T19:26:39+10:00" />


    
      <base href="https://zintrulcre.vip/posts/leetcode/bitmanipulation/">
    
    <title>
  LeetCode 位运算 · 尾張
</title>

    
      <link rel="canonical" href="https://zintrulcre.vip/posts/leetcode/bitmanipulation/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" integrity="sha256-oSrCnRYXvHG31SBifqP2PM1uje7SJUyX0nTwO2RJV54=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://zintrulcre.vip/css/coder.min.28d751104f30c16da1aa1bb04015cbe662cacfe0d1b01af4f2240ad58580069c.css" integrity="sha256-KNdREE8wwW2hqhuwQBXL5mLKz&#43;DRsBr08iQK1YWABpw=" crossorigin="anonymous" media="screen" />
    

    

    

    

    <link rel="icon" type="image/png" href="https://zintrulcre.vip/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://zintrulcre.vip/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.75.1" />
  </head>

  <body class=" ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://zintrulcre.vip">
      尾張
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://zintrulcre.vip/posts/">Posts</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://zintrulcre.vip/about/">About</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">LeetCode 位运算</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2019-06-19T19:26:39&#43;10:00'>
                June 19, 2019
              </time>
            </span>
            
          </div>
          <div class="categories">
  <i class="fas fa-folder"></i>
    <a href="https://zintrulcre.vip/categories/leetcode/">LeetCode</a></div>

          
        </div>
      </header>

      <div>
        <h1 id="leetcode-位运算httpsleetcode-cncomtagbit-manipulation"><a href="https://leetcode-cn.com/tag/bit-manipulation/">LeetCode 位运算</a></h1>
<p>位运算包括：</p>
<ol>
<li>与 &amp;</li>
<li>或 |</li>
<li>异或 ^</li>
<li>取反 ~</li>
<li>左移 &laquo;</li>
<li>右移 &raquo;</li>
</ol>
<h2 id="技巧">技巧</h2>
<ol>
<li>
<p>移位运算</p>
<ul>
<li>x &laquo; 1：算数左移
<ul>
<li>数字的二进制表示的所有位向左移动一位，相当于乘以 2</li>
<li>在右边补 0</li>
</ul>
</li>
<li>x &raquo; 1：算数右移
<ul>
<li>数字的二进制表示的所有位向右移动一位，相当于除以 2</li>
<li>在左边补符号位，即正数补 0，负数（在补码的基础上）补 1</li>
</ul>
</li>
<li>负数移位
<ul>
<li>负数是以补码的形式存储的，负数进行右移运算时需要将其取反转换成反码，加一转换成补码，再将其向右移动一位得到新的补码，再将其减一得到新的反码，再取反转换成原码才能得到结果。例如 -7 的二进制表示是 10000111（因为 32 位太长所以这里用 8 位 int 型表示），其反码是 11111000，补码是11111001，向右移动一位是 11111100，减一得到新的反码 11111011，原码是10000100，也就是 -4；补码向左移一位是 11110010，减一得到新的反码 11110001，原码是 10001110，也就是 -14</li>
<li>比较简单的理解方式是左移乘以 2，右移除以 2。例如 -7 &raquo; 1 = -7 / 2 = -4，-7 &laquo; 1 = -14</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="题目">题目</h2>
<h3 id="1-单个数字">1. 单个数字</h3>
<h4 id="693-交替位二进制数httpsleetcode-cncomproblemsbinary-number-with-alternating-bits"><a href="https://leetcode-cn.com/problems/binary-number-with-alternating-bits/">693 交替位二进制数</a></h4>
<p>检查一个二进制数相邻的两个位数是否均不相等。</p>
<p>逐位 &amp; 1 进行判断即可。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span> Solution {
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">bool</span> hasAlternatingBits(<span style="color:#fff;font-weight:bold">int</span> n) {
        <span style="color:#fff;font-weight:bold">bool</span> rel = n &amp; <span style="color:#ff0;font-weight:bold">1</span>;
        <span style="color:#fff;font-weight:bold">while</span> (n &gt; <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; (n &amp; <span style="color:#ff0;font-weight:bold">1</span>) == rel) {
            rel = !rel;
            n &gt;&gt;= <span style="color:#ff0;font-weight:bold">1</span>;
        }
        <span style="color:#fff;font-weight:bold">return</span> n &lt;= <span style="color:#ff0;font-weight:bold">0</span>;
    }
};
</code></pre></div><h4 id="476-数字的补数httpsleetcode-cncomproblemsnumber-complement"><a href="https://leetcode-cn.com/problems/number-complement/">476 数字的补数</a></h4>
<p>给一个正整数，求二进制表示取反的结果，取反不包括前导 0。</p>
<p>对每一位异或 1 即可。将大于 num 的第一个 2 ^ n 的数减一即可得到二进制表示全是 1 的，位数等于 num 的位数的数。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span> Solution {
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">int</span> findComplement(<span style="color:#fff;font-weight:bold">int</span> num) {
        <span style="color:#fff;font-weight:bold">long</span> <span style="color:#fff;font-weight:bold">long</span> util = <span style="color:#ff0;font-weight:bold">1</span>;
        <span style="color:#fff;font-weight:bold">while</span> (util &lt;= num)
            util &lt;&lt;= <span style="color:#ff0;font-weight:bold">1</span>;
        <span style="color:#fff;font-weight:bold">return</span> num ^ (util - <span style="color:#ff0;font-weight:bold">1</span>);
    }
};
</code></pre></div><h4 id="461-汉明距离httpsleetcode-cncomproblemshamming-distance"><a href="https://leetcode-cn.com/problems/hamming-distance/">461 汉明距离</a></h4>
<p>计算两个整数的二进制表示在各位上不同的数目。</p>
<p>逐位进行异或判断即可。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span> Solution {
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">int</span> hammingDistance(<span style="color:#fff;font-weight:bold">int</span> x, <span style="color:#fff;font-weight:bold">int</span> y) {
        <span style="color:#fff;font-weight:bold">int</span> res = <span style="color:#ff0;font-weight:bold">0</span>;
        <span style="color:#fff;font-weight:bold">while</span> (x &gt; <span style="color:#ff0;font-weight:bold">0</span> || y &gt; <span style="color:#ff0;font-weight:bold">0</span>) {
            res += ((x &amp; <span style="color:#ff0;font-weight:bold">1</span>) ^ (y &amp; <span style="color:#ff0;font-weight:bold">1</span>));
            x &gt;&gt;= <span style="color:#ff0;font-weight:bold">1</span>, y &gt;&gt;= <span style="color:#ff0;font-weight:bold">1</span>;
        }
        <span style="color:#fff;font-weight:bold">return</span> res;
    }
};
</code></pre></div><h4 id="762-二进制表示中质数个计算置位httpsleetcode-cncomproblemsprime-number-of-set-bits-in-binary-representation"><a href="https://leetcode-cn.com/problems/prime-number-of-set-bits-in-binary-representation/">762 二进制表示中质数个计算置位</a></h4>
<p>计算 [L, R] 中置位位数为质数的个数。</p>
<p>先逐位判断数 i 在当前位上是否等一 1，得到置位位数后判断是否是质数。判断质数的时候可以先排除掉模以 6 等于 0, 2, 3, 4 的情况，因为这几种情况分别可以被 6, 2, 3, 2 整除，剩下的再判断其模以 6n - 1 和 6n + 1 是否等于 0 即可。还可以先把小于等于 32 的质数存储在哈希表或数组中，这样的话查询时间会降低一些。时间复杂度是 O(n)，n 是 [L, R] 的个数。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span> Solution {
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">int</span> countPrimeSetBits(<span style="color:#fff;font-weight:bold">int</span> L, <span style="color:#fff;font-weight:bold">int</span> R) {
        <span style="color:#fff;font-weight:bold">int</span> res = <span style="color:#ff0;font-weight:bold">0</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = L; i &lt;= R; ++i) {
            <span style="color:#fff;font-weight:bold">int</span> m = i;
            <span style="color:#fff;font-weight:bold">int</span> cnt = <span style="color:#ff0;font-weight:bold">0</span>;
            <span style="color:#fff;font-weight:bold">while</span> (m &gt; <span style="color:#ff0;font-weight:bold">0</span>) {
                <span style="color:#fff;font-weight:bold">if</span> (m &amp; <span style="color:#ff0;font-weight:bold">1</span>)
                    ++cnt;
                m &gt;&gt;= <span style="color:#ff0;font-weight:bold">1</span>;
            }
            <span style="color:#fff;font-weight:bold">if</span> (IsPrime(cnt))
                ++res;
        }
        <span style="color:#fff;font-weight:bold">return</span> res;
    }
    
    <span style="color:#fff;font-weight:bold">bool</span> IsPrime(<span style="color:#fff;font-weight:bold">int</span> num) {
        <span style="color:#fff;font-weight:bold">if</span> (num &lt; <span style="color:#ff0;font-weight:bold">4</span>)
            <span style="color:#fff;font-weight:bold">return</span> num &gt; <span style="color:#ff0;font-weight:bold">1</span>;
        <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (num % <span style="color:#ff0;font-weight:bold">6</span> != <span style="color:#ff0;font-weight:bold">1</span> &amp;&amp; num % <span style="color:#ff0;font-weight:bold">6</span> != <span style="color:#ff0;font-weight:bold">5</span>)
            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">5</span>; i &lt;= sqrt(num); i += <span style="color:#ff0;font-weight:bold">6</span>)
            <span style="color:#fff;font-weight:bold">if</span> (num % i == <span style="color:#ff0;font-weight:bold">0</span> || num % (i + <span style="color:#ff0;font-weight:bold">2</span>) == <span style="color:#ff0;font-weight:bold">0</span>)
                <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
    }
};
</code></pre></div><h4 id="136-只出现一次的数字httpsleetcode-cncomproblemssingle-number"><a href="https://leetcode-cn.com/problems/single-number/">136 只出现一次的数字</a></h4>
<p>给一个数组，其他数都出现了两次，只有一个数出现了一次，找到这个数。</p>
<p>因为 a ^ a = 0，所以可以用 0 异或这个数组中的所有数，最后得到的就是唯一的一个数。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span> Solution {
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">int</span> singleNumber(vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&amp; nums) {
        <span style="color:#fff;font-weight:bold">int</span> res = <span style="color:#ff0;font-weight:bold">0</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> &amp;m:nums)
            res ^= m;
        <span style="color:#fff;font-weight:bold">return</span> res;
    }
};
</code></pre></div>
      </div>

      <footer>
        


        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "zintrulcre" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </footer>
    </article>

    
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
    
    
    
      
      <a href="https://github.com/luizdepra/hugo-coder/tree/"></a>
    
  </section>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
    </main>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-132809676-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


  </body>

</html>
