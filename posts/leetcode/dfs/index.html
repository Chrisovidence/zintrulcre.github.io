<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Zhengyu Chen">
    <meta name="description" content="ZintrulCre @ 尾張">
    <meta name="keywords" content="ZintrulCre, 尾張">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="LeetCode 深度优先搜索"/>
<meta name="twitter:description" content="LeetCode DFS 题目 78 子集 典型的回溯，找出所有可能情况。 classSolution { vector&lt;vector&lt;int&gt;&gt; res; public: vector&lt;vector&lt;int&gt;&gt; subsets(vector&lt;int&gt; &amp;nums) { res = vector&lt;vector&lt;int&gt;&gt;(1, vector&lt;int&gt;()); vector&lt;int&gt; curr; DFS(nums, 0, curr); return res; } void DFS(vector&lt;int&gt; &amp;nums, int idx, vector&lt;int&gt; &amp;curr) { for (int i = idx; i &lt; nums.size(); &#43;&#43;i) { curr.push_back(nums[i]); res.push_back(curr); DFS(nums, i &#43; 1, curr); curr.pop_back(); }"/>

    <meta property="og:title" content="LeetCode 深度优先搜索" />
<meta property="og:description" content="LeetCode DFS 题目 78 子集 典型的回溯，找出所有可能情况。 classSolution { vector&lt;vector&lt;int&gt;&gt; res; public: vector&lt;vector&lt;int&gt;&gt; subsets(vector&lt;int&gt; &amp;nums) { res = vector&lt;vector&lt;int&gt;&gt;(1, vector&lt;int&gt;()); vector&lt;int&gt; curr; DFS(nums, 0, curr); return res; } void DFS(vector&lt;int&gt; &amp;nums, int idx, vector&lt;int&gt; &amp;curr) { for (int i = idx; i &lt; nums.size(); &#43;&#43;i) { curr.push_back(nums[i]); res.push_back(curr); DFS(nums, i &#43; 1, curr); curr.pop_back(); }" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zintrulcre.vip/posts/leetcode/dfs/" />
<meta property="article:published_time" content="2019-07-27T12:12:25&#43;10:00"/>
<meta property="article:modified_time" content="2019-07-27T12:12:25&#43;10:00"/>


    
      <base href="https://zintrulcre.vip/posts/leetcode/dfs/">
    
    <title>
  LeetCode 深度优先搜索 · 尾張
</title>

    
      <link rel="canonical" href="https://zintrulcre.vip/posts/leetcode/dfs/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" integrity="sha256-oSrCnRYXvHG31SBifqP2PM1uje7SJUyX0nTwO2RJV54=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://zintrulcre.vip/css/coder.min.28d751104f30c16da1aa1bb04015cbe662cacfe0d1b01af4f2240ad58580069c.css" integrity="sha256-KNdREE8wwW2hqhuwQBXL5mLKz&#43;DRsBr08iQK1YWABpw=" crossorigin="anonymous" media="screen" />
    

    

    

    

    <link rel="icon" type="image/png" href="https://zintrulcre.vip/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://zintrulcre.vip/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.55.2" />
  </head>

  <body class=" ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://zintrulcre.vip">
      尾張
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://zintrulcre.vip/posts/">Posts</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://zintrulcre.vip/about/">About</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">LeetCode 深度优先搜索</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2019-07-27T12:12:25&#43;10:00'>
                July 27, 2019
              </time>
            </span>
            
          </div>
          <div class="categories">
  <i class="fas fa-folder"></i>
    <a href="https://zintrulcre.vip/categories/leetcode/">LeetCode</a></div>

          
        </div>
      </header>

      <div>
        

<h1 id="leetcode-dfs-https-leetcode-cn-com-tag-depth-first-search"><a href="https://leetcode-cn.com/tag/depth-first-search/">LeetCode DFS</a></h1>

<h2 id="题目">题目</h2>

<h4 id="78-子集-https-leetcode-cn-com-problems-subsets"><a href="https://leetcode-cn.com/problems/subsets/">78 子集</a></h4>

<p>典型的回溯，找出所有可能情况。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; res;
<span style="color:#fff;font-weight:bold">public</span>:
    vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; subsets(vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt; &amp;nums) {
        res = vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt;(<span style="color:#ff0;font-weight:bold">1</span>, vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;());
        vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt; curr;
        DFS(nums, <span style="color:#ff0;font-weight:bold">0</span>, curr);
        <span style="color:#fff;font-weight:bold">return</span> res;
    }

    <span style="color:#fff;font-weight:bold">void</span> DFS(vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt; &amp;nums, <span style="color:#fff;font-weight:bold">int</span> idx, vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt; &amp;curr) {
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = idx; i &lt; nums.size(); ++i) {
            curr.push_back(nums[i]);
            res.push_back(curr);
            DFS(nums, i + <span style="color:#ff0;font-weight:bold">1</span>, curr);
            curr.pop_back();
        }
    }
};
</code></pre></div>
<h4 id="733-图像渲染-https-leetcode-cn-com-problems-flood-fill"><a href="https://leetcode-cn.com/problems/flood-fill/">733 图像渲染</a></h4>

<p>从给定的 image[sr][sc] 开始 DFS 或 BFS，将相邻的值相同的点的值全部修改为 newColor，注意要判断给定的 image[sr][sc] 是否等于 newColor，否则如果不使用额外空间的 visited 数组记录已经访问过的点的话会造成死循环栈溢出。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    <span style="color:#fff;font-weight:bold">int</span> m, n;
    <span style="color:#fff;font-weight:bold">int</span> dir[<span style="color:#ff0;font-weight:bold">4</span>][<span style="color:#ff0;font-weight:bold">2</span>] = {{<span style="color:#ff0;font-weight:bold">0</span>,  <span style="color:#ff0;font-weight:bold">1</span>}, {<span style="color:#ff0;font-weight:bold">1</span>,  <span style="color:#ff0;font-weight:bold">0</span>}, {<span style="color:#ff0;font-weight:bold">0</span>,  -<span style="color:#ff0;font-weight:bold">1</span>}, {-<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">0</span>}};
    vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt; visited;
<span style="color:#fff;font-weight:bold">public</span>:
    vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; floodFill(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; &amp;image, <span style="color:#fff;font-weight:bold">int</span> sr, <span style="color:#fff;font-weight:bold">int</span> sc, <span style="color:#fff;font-weight:bold">int</span> newColor) {
        m = image.size(), n = m ? image[<span style="color:#ff0;font-weight:bold">0</span>].size() : <span style="color:#ff0;font-weight:bold">0</span>;
        visited = vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt;(m, vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;(n, <span style="color:#fff;font-weight:bold">false</span>));
        <span style="color:#fff;font-weight:bold">if</span> (image[sr][sc] != newColor)
            DFS(image, sr, sc, newColor);
        <span style="color:#fff;font-weight:bold">return</span> image;
    }

    <span style="color:#fff;font-weight:bold">void</span> DFS(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; &amp;image, <span style="color:#fff;font-weight:bold">int</span> r, <span style="color:#fff;font-weight:bold">int</span> c, <span style="color:#fff;font-weight:bold">int</span> val) {
        <span style="color:#fff;font-weight:bold">int</span> ori = image[r][c];
        image[r][c] = val;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> d = <span style="color:#ff0;font-weight:bold">0</span>; d &lt; <span style="color:#ff0;font-weight:bold">4</span>; ++d) {
            <span style="color:#fff;font-weight:bold">int</span> i = r + dir[d][<span style="color:#ff0;font-weight:bold">0</span>];
            <span style="color:#fff;font-weight:bold">int</span> j = c + dir[d][<span style="color:#ff0;font-weight:bold">1</span>];
            <span style="color:#fff;font-weight:bold">if</span> (i &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; i &lt; m &amp;&amp; j &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; j &lt; n &amp;&amp; image[i][j] == ori)
                DFS(image, i, j, val);
        }
    }
};
</code></pre></div>
<h4 id="463-岛屿的周长-https-leetcode-cn-com-problems-island-perimeter"><a href="https://leetcode-cn.com/problems/island-perimeter/">463 岛屿的周长</a></h4>

<p>对小岛进行 DFS，根据一个点周围有几个相邻的点来计算当前点的周长。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    <span style="color:#fff;font-weight:bold">int</span> x, y, res;
    vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt; visited;
    <span style="color:#fff;font-weight:bold">int</span> dir[<span style="color:#ff0;font-weight:bold">4</span>][<span style="color:#ff0;font-weight:bold">2</span>] = {{<span style="color:#ff0;font-weight:bold">0</span>,  <span style="color:#ff0;font-weight:bold">1</span>},
                     {<span style="color:#ff0;font-weight:bold">1</span>,  <span style="color:#ff0;font-weight:bold">0</span>},
                     {<span style="color:#ff0;font-weight:bold">0</span>,  -<span style="color:#ff0;font-weight:bold">1</span>},
                     {-<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">0</span>}};
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">int</span> islandPerimeter(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; &amp;grid) {
        x = grid.size(), y = x ? grid[<span style="color:#ff0;font-weight:bold">0</span>].size() : <span style="color:#ff0;font-weight:bold">0</span>, res = <span style="color:#ff0;font-weight:bold">0</span>;
        visited = vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt;(x, vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;(y, <span style="color:#fff;font-weight:bold">false</span>));
        <span style="color:#fff;font-weight:bold">if</span> (x == <span style="color:#ff0;font-weight:bold">0</span>)
            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#ff0;font-weight:bold">0</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; x; ++i)
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> j = <span style="color:#ff0;font-weight:bold">0</span>; j &lt; y; ++j)
                <span style="color:#fff;font-weight:bold">if</span> (grid[i][j] == <span style="color:#ff0;font-weight:bold">1</span>) {
                    DFS(grid, i, j);
                    <span style="color:#fff;font-weight:bold">return</span> res;
                }
        <span style="color:#fff;font-weight:bold">return</span> res;
    }

    <span style="color:#fff;font-weight:bold">void</span> DFS(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; &amp;grid, <span style="color:#fff;font-weight:bold">int</span> i, <span style="color:#fff;font-weight:bold">int</span> j) {
        visited[i][j] = <span style="color:#fff;font-weight:bold">true</span>;
        <span style="color:#fff;font-weight:bold">int</span> edge = <span style="color:#ff0;font-weight:bold">4</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> l = <span style="color:#ff0;font-weight:bold">0</span>; l &lt; <span style="color:#ff0;font-weight:bold">4</span>; ++l) {
            <span style="color:#fff;font-weight:bold">int</span> a = i + dir[l][<span style="color:#ff0;font-weight:bold">0</span>];
            <span style="color:#fff;font-weight:bold">int</span> b = j + dir[l][<span style="color:#ff0;font-weight:bold">1</span>];
            <span style="color:#fff;font-weight:bold">if</span> (a &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; a &lt; x &amp;&amp; b &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; b &lt; y &amp;&amp; grid[a][b] == <span style="color:#ff0;font-weight:bold">1</span>) {
                --edge;
                <span style="color:#fff;font-weight:bold">if</span> (!visited[a][b])
                    DFS(grid, a, b);
            }
        }
        res += edge;
    }
};
</code></pre></div>
<h4 id="200-岛屿数量-https-leetcode-cn-com-problems-number-of-islands"><a href="https://leetcode-cn.com/problems/number-of-islands/">200 岛屿数量</a></h4>

<p>每次进行 DFS 的全部节点即为一个岛屿，DFS 完整个数组即可。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt; visited;
    <span style="color:#fff;font-weight:bold">int</span> x, y, res;
    <span style="color:#fff;font-weight:bold">int</span> dir[<span style="color:#ff0;font-weight:bold">4</span>][<span style="color:#ff0;font-weight:bold">2</span>] = {{<span style="color:#ff0;font-weight:bold">0</span>,  <span style="color:#ff0;font-weight:bold">1</span>}, {<span style="color:#ff0;font-weight:bold">1</span>,  <span style="color:#ff0;font-weight:bold">0</span>}, {<span style="color:#ff0;font-weight:bold">0</span>,  -<span style="color:#ff0;font-weight:bold">1</span>}, {-<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">0</span>}};
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">int</span> numIslands(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;&gt; &amp;grid) {
        x = grid.size(), y = x ? grid[<span style="color:#ff0;font-weight:bold">0</span>].size() : <span style="color:#ff0;font-weight:bold">0</span>, res = <span style="color:#ff0;font-weight:bold">0</span>;
        visited = vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt;(x, vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;(y, <span style="color:#ff0;font-weight:bold">0</span>));
        <span style="color:#fff;font-weight:bold">if</span> (x == <span style="color:#ff0;font-weight:bold">0</span>)
            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#ff0;font-weight:bold">0</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; x; ++i)
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> j = <span style="color:#ff0;font-weight:bold">0</span>; j &lt; y; ++j)
                <span style="color:#fff;font-weight:bold">if</span> (grid[i][j] == <span style="color:#0ff;font-weight:bold">&#39;1&#39;</span> &amp;&amp; !visited[i][j]) {
                    ++res;
                    DFS(grid, i, j);
                }
        <span style="color:#fff;font-weight:bold">return</span> res;
    }

    <span style="color:#fff;font-weight:bold">void</span> DFS(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;&gt; &amp;grid, <span style="color:#fff;font-weight:bold">int</span> i, <span style="color:#fff;font-weight:bold">int</span> j) {
        visited[i][j] = <span style="color:#fff;font-weight:bold">true</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> d = <span style="color:#ff0;font-weight:bold">0</span>; d &lt; <span style="color:#ff0;font-weight:bold">4</span>; ++d) {
            <span style="color:#fff;font-weight:bold">int</span> a = i + dir[d][<span style="color:#ff0;font-weight:bold">0</span>];
            <span style="color:#fff;font-weight:bold">int</span> b = j + dir[d][<span style="color:#ff0;font-weight:bold">1</span>];
            <span style="color:#fff;font-weight:bold">if</span> (a &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; a &lt; x &amp;&amp; b &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; b &lt; y &amp;&amp; grid[a][b] == <span style="color:#0ff;font-weight:bold">&#39;1&#39;</span> &amp;&amp; !visited[a][b])
                DFS(grid, a, b);
        }
    }
};
</code></pre></div>
<h4 id="695-岛屿的最大面积-https-leetcode-cn-com-problems-max-area-of-island"><a href="https://leetcode-cn.com/problems/max-area-of-island/">695 岛屿的最大面积</a></h4>

<p>对每个岛屿进行 DFS，每次都更新最大面积即可。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt; visited;
    <span style="color:#fff;font-weight:bold">int</span> x, y, res;
    <span style="color:#fff;font-weight:bold">int</span> dir[<span style="color:#ff0;font-weight:bold">4</span>][<span style="color:#ff0;font-weight:bold">2</span>] = {{<span style="color:#ff0;font-weight:bold">0</span>,  <span style="color:#ff0;font-weight:bold">1</span>}, {<span style="color:#ff0;font-weight:bold">1</span>,  <span style="color:#ff0;font-weight:bold">0</span>}, {<span style="color:#ff0;font-weight:bold">0</span>,  -<span style="color:#ff0;font-weight:bold">1</span>}, {-<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">0</span>}};
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">int</span> maxAreaOfIsland(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; &amp;grid) {
        x = grid.size(), y = x ? grid[<span style="color:#ff0;font-weight:bold">0</span>].size() : <span style="color:#ff0;font-weight:bold">0</span>, res = <span style="color:#ff0;font-weight:bold">0</span>;
        visited = vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt;(x, vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;(y, <span style="color:#ff0;font-weight:bold">0</span>));
        <span style="color:#fff;font-weight:bold">if</span> (x == <span style="color:#ff0;font-weight:bold">0</span>)
            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#ff0;font-weight:bold">0</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; x; ++i)
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> j = <span style="color:#ff0;font-weight:bold">0</span>; j &lt; y; ++j)
                <span style="color:#fff;font-weight:bold">if</span> (grid[i][j] == <span style="color:#ff0;font-weight:bold">1</span> &amp;&amp; !visited[i][j]) {
                    <span style="color:#fff;font-weight:bold">int</span> area = <span style="color:#ff0;font-weight:bold">1</span>;
                    DFS(grid, i, j, area);
                }
        <span style="color:#fff;font-weight:bold">return</span> res;
    }

    <span style="color:#fff;font-weight:bold">void</span> DFS(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; &amp;grid, <span style="color:#fff;font-weight:bold">int</span> i, <span style="color:#fff;font-weight:bold">int</span> j, <span style="color:#fff;font-weight:bold">int</span> &amp;area) {
        visited[i][j] = <span style="color:#fff;font-weight:bold">true</span>;
        res = max(res, area);
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> d = <span style="color:#ff0;font-weight:bold">0</span>; d &lt; <span style="color:#ff0;font-weight:bold">4</span>; ++d) {
            <span style="color:#fff;font-weight:bold">int</span> a = i + dir[d][<span style="color:#ff0;font-weight:bold">0</span>];
            <span style="color:#fff;font-weight:bold">int</span> b = j + dir[d][<span style="color:#ff0;font-weight:bold">1</span>];
            <span style="color:#fff;font-weight:bold">if</span> (a &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; a &lt; x &amp;&amp; b &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; b &lt; y &amp;&amp; grid[a][b] == <span style="color:#ff0;font-weight:bold">1</span> &amp;&amp; !visited[a][b]) {
                ++area;
                DFS(grid, a, b, area);
            }
        }
    }
};
</code></pre></div>
<h4 id="841-钥匙和房间-https-leetcode-cn-com-problems-keys-and-rooms"><a href="https://leetcode-cn.com/problems/keys-and-rooms/">841 钥匙和房间</a></h4>

<p>对每个房间进行 DFS。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt; visited;
    <span style="color:#fff;font-weight:bold">int</span> m, n;
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">bool</span> canVisitAllRooms(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; &amp;rooms) {
        m = n = rooms.size();
        visited = vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;(n, <span style="color:#fff;font-weight:bold">false</span>);
        <span style="color:#fff;font-weight:bold">return</span> DFS(rooms, <span style="color:#ff0;font-weight:bold">0</span>);
    }

    <span style="color:#fff;font-weight:bold">bool</span> DFS(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; &amp;rooms, <span style="color:#fff;font-weight:bold">int</span> room_num) {
        --m;
        visited[room_num] = <span style="color:#fff;font-weight:bold">true</span>;
        <span style="color:#fff;font-weight:bold">if</span> (m == <span style="color:#ff0;font-weight:bold">0</span>)
            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> &amp;r:rooms[room_num])
            <span style="color:#fff;font-weight:bold">if</span> (!visited[r] &amp;&amp; DFS(rooms, r))
                <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
    }
};
</code></pre></div>
<h4 id="113-路径总和-ii-https-leetcode-cn-com-problems-path-sum-ii"><a href="https://leetcode-cn.com/problems/path-sum-ii/">113 路径总和 II</a></h4>

<p>对整个树进行 DFS，在叶子节点进行判断。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; res;
<span style="color:#fff;font-weight:bold">public</span>:
    vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; pathSum(TreeNode *root, <span style="color:#fff;font-weight:bold">int</span> sum) {
        res = vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt;();
        vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt; path;
        DFS(root, sum, path);
        <span style="color:#fff;font-weight:bold">return</span> res;
    }

    <span style="color:#fff;font-weight:bold">void</span> DFS(TreeNode *root, <span style="color:#fff;font-weight:bold">int</span> sum, vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt; &amp;path) {
        <span style="color:#fff;font-weight:bold">if</span> (!root)
            <span style="color:#fff;font-weight:bold">return</span>;
        path.push_back(root-&gt;val);
        <span style="color:#fff;font-weight:bold">if</span> (!root-&gt;left &amp;&amp; !root-&gt;right) {
            <span style="color:#fff;font-weight:bold">if</span> (sum - root-&gt;val == <span style="color:#ff0;font-weight:bold">0</span>)
                res.push_back(path);
        } <span style="color:#fff;font-weight:bold">else</span> {
            DFS(root-&gt;left, sum - root-&gt;val, path);
            DFS(root-&gt;right, sum - root-&gt;val, path);
        }
        path.pop_back();
    }
};
</code></pre></div>
<h4 id="130-被围绕的区域-https-leetcode-cn-com-problems-surrounded-regions"><a href="https://leetcode-cn.com/problems/surrounded-regions/">130 被围绕的区域</a></h4>

<p>对最外围的所有 &lsquo;O&rsquo; 进行 DFS 并进行标记，最后在遍历一遍整个矩阵，将所有未被标记的 &lsquo;O&rsquo; 改为 &lsquo;X&rsquo;。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    <span style="color:#fff;font-weight:bold">int</span> dir[<span style="color:#ff0;font-weight:bold">4</span>][<span style="color:#ff0;font-weight:bold">2</span>] = {{<span style="color:#ff0;font-weight:bold">0</span>,  <span style="color:#ff0;font-weight:bold">1</span>}, {<span style="color:#ff0;font-weight:bold">1</span>,  <span style="color:#ff0;font-weight:bold">0</span>}, {<span style="color:#ff0;font-weight:bold">0</span>,  -<span style="color:#ff0;font-weight:bold">1</span>}, {-<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">0</span>}};
    <span style="color:#fff;font-weight:bold">int</span> m, n;
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">void</span> solve(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;&gt; &amp;board) {
        m = board.size(), n = m ? board[<span style="color:#ff0;font-weight:bold">0</span>].size() : <span style="color:#ff0;font-weight:bold">0</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; m; ++i) {
            <span style="color:#fff;font-weight:bold">if</span> (board[i][<span style="color:#ff0;font-weight:bold">0</span>] == <span style="color:#0ff;font-weight:bold">&#39;O&#39;</span>)
                DFS(board, i, <span style="color:#ff0;font-weight:bold">0</span>);
            <span style="color:#fff;font-weight:bold">if</span> (board[i][n - <span style="color:#ff0;font-weight:bold">1</span>] == <span style="color:#0ff;font-weight:bold">&#39;O&#39;</span>)
                DFS(board, i, n - <span style="color:#ff0;font-weight:bold">1</span>);
        }
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> j = <span style="color:#ff0;font-weight:bold">1</span>; j &lt; n - <span style="color:#ff0;font-weight:bold">1</span>; ++j) {
            <span style="color:#fff;font-weight:bold">if</span> (board[<span style="color:#ff0;font-weight:bold">0</span>][j] == <span style="color:#0ff;font-weight:bold">&#39;O&#39;</span>)
                DFS(board, <span style="color:#ff0;font-weight:bold">0</span>, j);
            <span style="color:#fff;font-weight:bold">if</span> (board[m - <span style="color:#ff0;font-weight:bold">1</span>][j] == <span style="color:#0ff;font-weight:bold">&#39;O&#39;</span>)
                DFS(board, m - <span style="color:#ff0;font-weight:bold">1</span>, j);
        }
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> &amp;bo:board)
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> &amp;b:bo)
                b = (b == <span style="color:#0ff;font-weight:bold">&#39;O&#39;</span> ? <span style="color:#0ff;font-weight:bold">&#39;X&#39;</span> : (b == <span style="color:#0ff;font-weight:bold">&#39;M&#39;</span> ? <span style="color:#0ff;font-weight:bold">&#39;O&#39;</span> : b));
    }

    <span style="color:#fff;font-weight:bold">void</span> DFS(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;&gt; &amp;board, <span style="color:#fff;font-weight:bold">int</span> x, <span style="color:#fff;font-weight:bold">int</span> y) {
        board[x][y] = <span style="color:#0ff;font-weight:bold">&#39;M&#39;</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> &amp;d:dir) {
            <span style="color:#fff;font-weight:bold">int</span> i = x + d[<span style="color:#ff0;font-weight:bold">0</span>], j = y + d[<span style="color:#ff0;font-weight:bold">1</span>];
            <span style="color:#fff;font-weight:bold">if</span> (i &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; i &lt; m &amp;&amp; j &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; j &lt; n &amp;&amp; board[i][j] == <span style="color:#0ff;font-weight:bold">&#39;O&#39;</span>)
                DFS(board, i, j);
        }
    }
};
</code></pre></div>
<h4 id="529-扫雷游戏-https-leetcode-cn-com-problems-minesweeper-submissions"><a href="https://leetcode-cn.com/problems/minesweeper/submissions/">529 扫雷游戏</a></h4>

<p>先计算出每个位置周围的 8 个位置的炸弹的数量，如果数量大于等于 1，那么标记出来并且结束搜索，如果数量为 0，那么继续向周围 8 个位置搜索。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    <span style="color:#fff;font-weight:bold">int</span> m, n;
<span style="color:#fff;font-weight:bold">public</span>:
    vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;&gt; updateBoard(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;&gt; &amp;board, vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt; &amp;click) {
        <span style="color:#fff;font-weight:bold">if</span> (board[click[<span style="color:#ff0;font-weight:bold">0</span>]][click[<span style="color:#ff0;font-weight:bold">1</span>]] == <span style="color:#0ff;font-weight:bold">&#39;M&#39;</span>) {
            board[click[<span style="color:#ff0;font-weight:bold">0</span>]][click[<span style="color:#ff0;font-weight:bold">1</span>]] = <span style="color:#0ff;font-weight:bold">&#39;X&#39;</span>;
            <span style="color:#fff;font-weight:bold">return</span> board;
        }
        m = board.size(), n = m ? board[<span style="color:#ff0;font-weight:bold">0</span>].size() : <span style="color:#ff0;font-weight:bold">0</span>;
        DFS(board, click[<span style="color:#ff0;font-weight:bold">0</span>], click[<span style="color:#ff0;font-weight:bold">1</span>]);
        <span style="color:#fff;font-weight:bold">return</span> board;
    }

    <span style="color:#fff;font-weight:bold">void</span> DFS(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;&gt; &amp;board, <span style="color:#fff;font-weight:bold">int</span> x, <span style="color:#fff;font-weight:bold">int</span> y) {
        <span style="color:#fff;font-weight:bold">int</span> b = <span style="color:#ff0;font-weight:bold">0</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = x - <span style="color:#ff0;font-weight:bold">1</span>; i &lt;= x + <span style="color:#ff0;font-weight:bold">1</span>; ++i)
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> j = y - <span style="color:#ff0;font-weight:bold">1</span>; j &lt;= y + <span style="color:#ff0;font-weight:bold">1</span>; ++j)
                <span style="color:#fff;font-weight:bold">if</span> (i &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; i &lt; m &amp;&amp; j &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; j &lt; n &amp;&amp; board[i][j] == <span style="color:#0ff;font-weight:bold">&#39;M&#39;</span>)
                    ++b;
        <span style="color:#fff;font-weight:bold">if</span> (b != <span style="color:#ff0;font-weight:bold">0</span>) {
            board[x][y] = <span style="color:#fff;font-weight:bold">static_cast</span>&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;(b + <span style="color:#0ff;font-weight:bold">&#39;0&#39;</span>);
            <span style="color:#fff;font-weight:bold">return</span>;
        }
        board[x][y] = <span style="color:#0ff;font-weight:bold">&#39;B&#39;</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = x - <span style="color:#ff0;font-weight:bold">1</span>; i &lt;= x + <span style="color:#ff0;font-weight:bold">1</span>; ++i)
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> j = y - <span style="color:#ff0;font-weight:bold">1</span>; j &lt;= y + <span style="color:#ff0;font-weight:bold">1</span>; ++j)
                <span style="color:#fff;font-weight:bold">if</span> (i &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; i &lt; m &amp;&amp; j &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; j &lt; n &amp;&amp; board[i][j] == <span style="color:#0ff;font-weight:bold">&#39;E&#39;</span>)
                    DFS(board, i, j);
    }
};
</code></pre></div>
<h4 id="473-火柴拼正方形-https-leetcode-cn-com-problems-matchsticks-to-square-submissions"><a href="https://leetcode-cn.com/problems/matchsticks-to-square/submissions/">473 火柴拼正方形</a></h4>

<p>因为要求用所有的火柴来拼成正方形，所以先判断所有的火柴组成的是否是 4 的倍数以及是否有数字大于 sum / 4 ，然后将数组从大到小排序，这样可以用贪心的策略减少搜索的次数，否则需要进行回溯，最后对整个数组进行 DFS。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    <span style="color:#fff;font-weight:bold">int</span> match, n, sum;
    vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt; visited;
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">bool</span> makesquare(vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt; &amp;nums) {
        sort(nums.begin(), nums.end(), [](<span style="color:#fff;font-weight:bold">int</span> &amp;a, <span style="color:#fff;font-weight:bold">int</span> &amp;b) { <span style="color:#fff;font-weight:bold">return</span> a &gt; b; });
        sum = accumulate(nums.begin(), nums.end(), <span style="color:#ff0;font-weight:bold">0</span>), n = nums.size(), match = <span style="color:#ff0;font-weight:bold">4</span>;
        visited = vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;(n, <span style="color:#fff;font-weight:bold">false</span>);
        <span style="color:#fff;font-weight:bold">if</span> (n == <span style="color:#ff0;font-weight:bold">0</span> || sum % <span style="color:#ff0;font-weight:bold">4</span> != <span style="color:#ff0;font-weight:bold">0</span>)
            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> &amp;m:nums)
            <span style="color:#fff;font-weight:bold">if</span> (m &gt; sum / <span style="color:#ff0;font-weight:bold">4</span>)
                <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; n; ++i) {
            <span style="color:#fff;font-weight:bold">if</span> (!visited[i] &amp;&amp; DFS(nums, i, nums[i])) {
                visited[i] = <span style="color:#fff;font-weight:bold">true</span>;
                --match;
            }
        }
        <span style="color:#fff;font-weight:bold">return</span> match == <span style="color:#ff0;font-weight:bold">0</span>;
    }

    <span style="color:#fff;font-weight:bold">bool</span> DFS(vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt; &amp;nums, <span style="color:#fff;font-weight:bold">int</span> m, <span style="color:#fff;font-weight:bold">int</span> acc) {
        <span style="color:#fff;font-weight:bold">if</span> (acc &gt; sum / <span style="color:#ff0;font-weight:bold">4</span>)
            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
        <span style="color:#fff;font-weight:bold">else</span> if (acc == sum / <span style="color:#ff0;font-weight:bold">4</span>)
            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = m + <span style="color:#ff0;font-weight:bold">1</span>; i &lt; n; ++i)
            <span style="color:#fff;font-weight:bold">if</span> (!visited[i] &amp;&amp; DFS(nums, i, acc + nums[i])) {
                visited[i] = <span style="color:#fff;font-weight:bold">true</span>;
                <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
            }
        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
    }
};
</code></pre></div>
<h4 id="980-不同路径-iii-https-leetcode-cn-com-problems-unique-paths-iii"><a href="https://leetcode-cn.com/problems/unique-paths-iii/">980 不同路径 III</a></h4>

<p>用一个变量 zeros 把矩阵中 0 的数量记录下来，每次遍历到 0 即 zeros - 1，直到 zeros == 0 且当前点的四个方向上有终点，那么结果 +1 并返回，继续下一步的 DFS。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    <span style="color:#fff;font-weight:bold">int</span> m, n, zeros, res;
    vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt; visited;
    <span style="color:#fff;font-weight:bold">int</span> dir[<span style="color:#ff0;font-weight:bold">4</span>][<span style="color:#ff0;font-weight:bold">2</span>] = {{<span style="color:#ff0;font-weight:bold">0</span>,  <span style="color:#ff0;font-weight:bold">1</span>},
                     {<span style="color:#ff0;font-weight:bold">1</span>,  <span style="color:#ff0;font-weight:bold">0</span>},
                     {<span style="color:#ff0;font-weight:bold">0</span>,  -<span style="color:#ff0;font-weight:bold">1</span>},
                     {-<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">0</span>}};
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">int</span> uniquePathsIII(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; &amp;grid) {
        m = grid.size(), n = m ? grid[<span style="color:#ff0;font-weight:bold">0</span>].size() : <span style="color:#ff0;font-weight:bold">0</span>, zeros = m * n - <span style="color:#ff0;font-weight:bold">2</span>, res = <span style="color:#ff0;font-weight:bold">0</span>;
        visited = vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt;(m, vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;(n, <span style="color:#fff;font-weight:bold">false</span>));
        <span style="color:#fff;font-weight:bold">int</span> sr, sc, er, ec;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; m; ++i)
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> j = <span style="color:#ff0;font-weight:bold">0</span>; j &lt; n; ++j)
                <span style="color:#fff;font-weight:bold">if</span> (grid[i][j] == <span style="color:#ff0;font-weight:bold">1</span>)
                    sr = i, sc = j;
                <span style="color:#fff;font-weight:bold">else</span> if (grid[i][j] == -<span style="color:#ff0;font-weight:bold">1</span>)
                    --zeros;
        DFS(grid, sr, sc, <span style="color:#ff0;font-weight:bold">0</span>);
        <span style="color:#fff;font-weight:bold">return</span> res;
    }

    <span style="color:#fff;font-weight:bold">void</span> DFS(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; &amp;grid, <span style="color:#fff;font-weight:bold">int</span> r, <span style="color:#fff;font-weight:bold">int</span> c, <span style="color:#fff;font-weight:bold">int</span> count) {
        visited[r][c] = <span style="color:#fff;font-weight:bold">true</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> &amp;d:dir) {
            <span style="color:#fff;font-weight:bold">int</span> i = r + d[<span style="color:#ff0;font-weight:bold">0</span>], j = c + d[<span style="color:#ff0;font-weight:bold">1</span>];
            <span style="color:#fff;font-weight:bold">if</span> (i &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; i &lt; m &amp;&amp; j &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; j &lt; n) {
                <span style="color:#fff;font-weight:bold">if</span> (grid[i][j] == <span style="color:#ff0;font-weight:bold">2</span> &amp;&amp; count == zeros) {
                    ++res;
                    <span style="color:#fff;font-weight:bold">break</span>;
                }
                <span style="color:#fff;font-weight:bold">if</span> (grid[i][j] == <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; !visited[i][j])
                    DFS(grid, i, j, count + <span style="color:#ff0;font-weight:bold">1</span>);
            }
        }
        visited[r][c] = <span style="color:#fff;font-weight:bold">false</span>;
    }
};
</code></pre></div>
<h4 id="37-解数独-https-leetcode-cn-com-problems-sudoku-solver"><a href="https://leetcode-cn.com/problems/sudoku-solver/">37 解数独</a></h4>

<p>对每个 &lsquo;.&rsquo; 格子进行从 &lsquo;1&rsquo; 到 &lsquo;9&rsquo; 的回溯，判断当前行，列，以及 3 * 3 的格子中是否有相同的值，直到到达矩阵的最后。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    <span style="color:#fff;font-weight:bold">int</span> m, n;
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">void</span> solveSudoku(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;&gt; &amp;board) {
        m = board.size(), n = board[<span style="color:#ff0;font-weight:bold">0</span>].size();
        DFS(board, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">0</span>);
    }

    <span style="color:#fff;font-weight:bold">bool</span> DFS(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;&gt; &amp;board, <span style="color:#fff;font-weight:bold">int</span> i, <span style="color:#fff;font-weight:bold">int</span> j) {
        <span style="color:#fff;font-weight:bold">if</span> (j &gt;= n)
            <span style="color:#fff;font-weight:bold">return</span> DFS(board, i + <span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">0</span>);
        <span style="color:#fff;font-weight:bold">else</span> if (i &gt;= m)
            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
        <span style="color:#fff;font-weight:bold">else</span> if (board[i][j] != <span style="color:#0ff;font-weight:bold">&#39;.&#39;</span>)
            <span style="color:#fff;font-weight:bold">return</span> DFS(board, i, j + <span style="color:#ff0;font-weight:bold">1</span>);
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">char</span> c = <span style="color:#0ff;font-weight:bold">&#39;1&#39;</span>; c &lt;= <span style="color:#0ff;font-weight:bold">&#39;9&#39;</span>; ++c) {
            <span style="color:#fff;font-weight:bold">if</span> (CheckNum(board, i, j, c)) {
                board[i][j] = c;
                <span style="color:#fff;font-weight:bold">if</span> (DFS(board, i, j + <span style="color:#ff0;font-weight:bold">1</span>))
                    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
                board[i][j] = <span style="color:#0ff;font-weight:bold">&#39;.&#39;</span>;
            }
        }
        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
    }

    <span style="color:#fff;font-weight:bold">bool</span> CheckNum(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;&gt; &amp;board, <span style="color:#fff;font-weight:bold">const</span> <span style="color:#fff;font-weight:bold">int</span> &amp;i, <span style="color:#fff;font-weight:bold">const</span> <span style="color:#fff;font-weight:bold">int</span> &amp;j, <span style="color:#fff;font-weight:bold">const</span> <span style="color:#fff;font-weight:bold">char</span> &amp;c) {
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> k = <span style="color:#ff0;font-weight:bold">0</span>; k &lt; <span style="color:#ff0;font-weight:bold">9</span>; ++k)
            <span style="color:#fff;font-weight:bold">if</span> (board[k][j] == c || board[i][k] == c)
                <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> a = <span style="color:#ff0;font-weight:bold">0</span>; a &lt; <span style="color:#ff0;font-weight:bold">3</span>; ++a)
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> b = <span style="color:#ff0;font-weight:bold">0</span>; b &lt; <span style="color:#ff0;font-weight:bold">3</span>; ++b)
                <span style="color:#fff;font-weight:bold">if</span> (board[a + i / <span style="color:#ff0;font-weight:bold">3</span> * <span style="color:#ff0;font-weight:bold">3</span>][b + j / <span style="color:#ff0;font-weight:bold">3</span> * <span style="color:#ff0;font-weight:bold">3</span>] == c)
                    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
    }
};
</code></pre></div>
<h4 id="79-单词搜索-https-leetcode-cn-com-problems-word-search"><a href="https://leetcode-cn.com/problems/word-search/">79 单词搜索</a></h4>

<p>在矩阵里进行一次 DFS 即可。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    <span style="color:#fff;font-weight:bold">int</span> m, n;
    <span style="color:#fff;font-weight:bold">int</span> dir[<span style="color:#ff0;font-weight:bold">4</span>][<span style="color:#ff0;font-weight:bold">2</span>] = {{<span style="color:#ff0;font-weight:bold">0</span>,  <span style="color:#ff0;font-weight:bold">1</span>}, {<span style="color:#ff0;font-weight:bold">1</span>,  <span style="color:#ff0;font-weight:bold">0</span>}, {<span style="color:#ff0;font-weight:bold">0</span>,  -<span style="color:#ff0;font-weight:bold">1</span>}, {-<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">0</span>}};
    vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt; visited;
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">bool</span> exist(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;&gt; &amp;board, string word) {
        m = board.size(), n = m ? board[<span style="color:#ff0;font-weight:bold">0</span>].size() : <span style="color:#ff0;font-weight:bold">0</span>;
        visited = vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt;(m, vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;(n, <span style="color:#fff;font-weight:bold">false</span>));
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; m; ++i)
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> j = <span style="color:#ff0;font-weight:bold">0</span>; j &lt; n; ++j)
                <span style="color:#fff;font-weight:bold">if</span> (board[i][j] == word[<span style="color:#ff0;font-weight:bold">0</span>] &amp;&amp; DFS(board, i, j, word.substr(<span style="color:#ff0;font-weight:bold">1</span>)))
                    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
    }

    <span style="color:#fff;font-weight:bold">bool</span> DFS(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;&gt; &amp;board, <span style="color:#fff;font-weight:bold">int</span> i, <span style="color:#fff;font-weight:bold">int</span> j, string word) {
        <span style="color:#fff;font-weight:bold">if</span> (word == <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>)
            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
        visited[i][j] = <span style="color:#fff;font-weight:bold">true</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> &amp;d:dir) {
            <span style="color:#fff;font-weight:bold">int</span> a = i + d[<span style="color:#ff0;font-weight:bold">0</span>], b = j + d[<span style="color:#ff0;font-weight:bold">1</span>];
            <span style="color:#fff;font-weight:bold">if</span> (a &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; a &lt; m &amp;&amp; b &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; b &lt; n &amp;&amp; board[a][b] == word[<span style="color:#ff0;font-weight:bold">0</span>] &amp;&amp; !visited[a][b] &amp;&amp;
                DFS(board, a, b, word.substr(<span style="color:#ff0;font-weight:bold">1</span>)))
                <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
        }
        visited[i][j] = <span style="color:#fff;font-weight:bold">false</span>;
        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
    }
};
</code></pre></div>
<h4 id="212-单词搜索-ii-https-leetcode-cn-com-problems-word-search-ii"><a href="https://leetcode-cn.com/problems/word-search-ii/">212 单词搜索 II</a></h4>

<p>最简单的方法是对每一个单词在矩阵里进行一次 DFS，这样的话时间复杂度是 O(m * n * k * l)，其中 m 是矩阵的长，n 是矩阵的宽，l是单词的数量，k 是所有单词的最长长度。我们可以为所有单词建立一个字典树，然后再在矩阵里进行一次 DFS，在矩阵的每个点处判断当前的字母是否在字典树的根节点的 next 数组中，如果是的话搜索其周围的字母以及继续遍历字典树，这样做的时间复杂度是 O(m * n * k)。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    <span style="color:#fff;font-weight:bold">struct</span> TrieNode {
        vector&lt;TrieNode *&gt; next;
        <span style="color:#fff;font-weight:bold">bool</span> end;

        TrieNode() {
            next = vector&lt;TrieNode *&gt;(<span style="color:#ff0;font-weight:bold">26</span>, <span style="color:#fff;font-weight:bold">nullptr</span>);
            end = <span style="color:#fff;font-weight:bold">false</span>;
        }
    };

    TrieNode *root;
    <span style="color:#fff;font-weight:bold">int</span> m, n;
    unordered_set&lt;string&gt; res;
    vector&lt;string&gt; ret;
    vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt; visited;
    <span style="color:#fff;font-weight:bold">int</span> dir[<span style="color:#ff0;font-weight:bold">4</span>][<span style="color:#ff0;font-weight:bold">2</span>] = {{<span style="color:#ff0;font-weight:bold">0</span>,  <span style="color:#ff0;font-weight:bold">1</span>}, {<span style="color:#ff0;font-weight:bold">1</span>,  <span style="color:#ff0;font-weight:bold">0</span>}, {<span style="color:#ff0;font-weight:bold">0</span>,  -<span style="color:#ff0;font-weight:bold">1</span>}, {-<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">0</span>}};
<span style="color:#fff;font-weight:bold">public</span>:
    vector&lt;string&gt; findWords(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;&gt; &amp;board, vector&lt;string&gt; &amp;words) {
        res = unordered_set&lt;string&gt;();
        m = board.size(), n = board[<span style="color:#ff0;font-weight:bold">0</span>].size();
        visited = vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt;(m, vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;(n, <span style="color:#fff;font-weight:bold">false</span>));
        BuildTrie(words);
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; m; ++i)
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> j = <span style="color:#ff0;font-weight:bold">0</span>; j &lt; n; ++j)
                <span style="color:#fff;font-weight:bold">if</span> (root-&gt;next[board[i][j] - <span style="color:#0ff;font-weight:bold">&#39;a&#39;</span>])
                    DFS(board, i, j, root-&gt;next[board[i][j] - <span style="color:#0ff;font-weight:bold">&#39;a&#39;</span>], string(<span style="color:#ff0;font-weight:bold">1</span>, board[i][j]));
        ret = vector&lt;string&gt;(res.begin(), res.end());
        <span style="color:#fff;font-weight:bold">return</span> ret;
    }

    <span style="color:#fff;font-weight:bold">void</span> BuildTrie(vector&lt;string&gt; &amp;words) {
        root = <span style="color:#fff;font-weight:bold">new</span> TrieNode();
        TrieNode *node;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> &amp;s:words) {
            node = root;
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> c:s) {
                <span style="color:#fff;font-weight:bold">if</span> (!node-&gt;next[c - <span style="color:#0ff;font-weight:bold">&#39;a&#39;</span>])
                    node-&gt;next[c - <span style="color:#0ff;font-weight:bold">&#39;a&#39;</span>] = <span style="color:#fff;font-weight:bold">new</span> TrieNode();
                node = node-&gt;next[c - <span style="color:#0ff;font-weight:bold">&#39;a&#39;</span>];
            }
            node-&gt;end = <span style="color:#fff;font-weight:bold">true</span>;
        }
    }

    <span style="color:#fff;font-weight:bold">void</span> DFS(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">char</span>&gt;&gt; &amp;board, <span style="color:#fff;font-weight:bold">int</span> i, <span style="color:#fff;font-weight:bold">int</span> j, TrieNode *node, string word) {
        <span style="color:#fff;font-weight:bold">if</span> (!node)
            <span style="color:#fff;font-weight:bold">return</span>;
        <span style="color:#fff;font-weight:bold">if</span> (node-&gt;end)
            res.insert(word);
        visited[i][j] = <span style="color:#fff;font-weight:bold">true</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> &amp;d:dir) {
            <span style="color:#fff;font-weight:bold">int</span> a = i + d[<span style="color:#ff0;font-weight:bold">0</span>], b = j + d[<span style="color:#ff0;font-weight:bold">1</span>];
            <span style="color:#fff;font-weight:bold">if</span> (a &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; a &lt; m &amp;&amp; b &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; b &lt; n &amp;&amp; node-&gt;next[board[a][b] - <span style="color:#0ff;font-weight:bold">&#39;a&#39;</span>] &amp;&amp; !visited[a][b])
                DFS(board, a, b, node-&gt;next[board[a][b] - <span style="color:#0ff;font-weight:bold">&#39;a&#39;</span>], word + board[a][b]);
        }
        visited[i][j] = <span style="color:#fff;font-weight:bold">false</span>;
    }
};
</code></pre></div>
<h4 id="749-隔离病毒-https-leetcode-cn-com-problems-contain-virus"><a href="https://leetcode-cn.com/problems/contain-virus/">749 隔离病毒</a></h4>

<p>矩阵会持续地变化，每一轮 DFS 结束后需要进行两个操作，一是将已经隔离的病毒进行标记，二是将未隔离的病毒进行感染（延伸），可以先将所有的未隔离的病毒先保存下来再依次进行延伸，写起来比较复杂。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
    <span style="color:#fff;font-weight:bold">int</span> m, n;
    <span style="color:#fff;font-weight:bold">int</span> dir[<span style="color:#ff0;font-weight:bold">4</span>][<span style="color:#ff0;font-weight:bold">2</span>] = {{<span style="color:#ff0;font-weight:bold">0</span>,  <span style="color:#ff0;font-weight:bold">1</span>},
                     {<span style="color:#ff0;font-weight:bold">1</span>,  <span style="color:#ff0;font-weight:bold">0</span>},
                     {<span style="color:#ff0;font-weight:bold">0</span>,  -<span style="color:#ff0;font-weight:bold">1</span>},
                     {-<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">0</span>}};
    vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt; visited;
<span style="color:#fff;font-weight:bold">public</span>:
    <span style="color:#fff;font-weight:bold">int</span> containVirus(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; &amp;grid) {
        m = grid.size(), n = m ? grid[<span style="color:#ff0;font-weight:bold">0</span>].size() : <span style="color:#ff0;font-weight:bold">0</span>;
        <span style="color:#fff;font-weight:bold">int</span> res = <span style="color:#ff0;font-weight:bold">0</span>;
        <span style="color:#fff;font-weight:bold">bool</span> exist = <span style="color:#fff;font-weight:bold">true</span>;
        <span style="color:#fff;font-weight:bold">while</span> (exist) {
            exist = <span style="color:#fff;font-weight:bold">false</span>;
            <span style="color:#fff;font-weight:bold">int</span> perimeter = <span style="color:#ff0;font-weight:bold">0</span>, co_x = <span style="color:#ff0;font-weight:bold">0</span>, co_y = <span style="color:#ff0;font-weight:bold">0</span>;
            visited = vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;&gt;(m, vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt;(n, <span style="color:#fff;font-weight:bold">false</span>));
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; m; ++i) {
                <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> j = <span style="color:#ff0;font-weight:bold">0</span>; j &lt; n; ++j) {
                    <span style="color:#fff;font-weight:bold">if</span> (grid[i][j] == <span style="color:#ff0;font-weight:bold">1</span> &amp;&amp; !visited[i][j]) {
                        exist = <span style="color:#fff;font-weight:bold">true</span>;
                        <span style="color:#fff;font-weight:bold">int</span> peri = CalcPeri(grid, i, j);
                        <span style="color:#fff;font-weight:bold">if</span> (peri &gt; perimeter) {
                            perimeter = peri;
                            co_x = i, co_y = j;
                        }
                    }
                }
            }
            res += perimeter;
            <span style="color:#fff;font-weight:bold">if</span> (exist) {
                Contain(grid, co_x, co_y);
                Infect(grid);
            }
        }
        <span style="color:#fff;font-weight:bold">return</span> res;
    }

    <span style="color:#fff;font-weight:bold">int</span> CalcPeri(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; &amp;grid, <span style="color:#fff;font-weight:bold">int</span> i, <span style="color:#fff;font-weight:bold">int</span> j) {
        <span style="color:#fff;font-weight:bold">int</span> peri = <span style="color:#ff0;font-weight:bold">4</span>, res = <span style="color:#ff0;font-weight:bold">0</span>;
        visited[i][j] = <span style="color:#fff;font-weight:bold">true</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> &amp;d:dir) {
            <span style="color:#fff;font-weight:bold">int</span> a = i + d[<span style="color:#ff0;font-weight:bold">0</span>], b = j + d[<span style="color:#ff0;font-weight:bold">1</span>];
            <span style="color:#fff;font-weight:bold">if</span> (a &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; a &lt; m &amp;&amp; b &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; b &lt; n) {
                <span style="color:#fff;font-weight:bold">if</span> (grid[a][b] != <span style="color:#ff0;font-weight:bold">0</span>)
                    --peri;
                <span style="color:#fff;font-weight:bold">if</span> (grid[a][b] == <span style="color:#ff0;font-weight:bold">1</span> &amp;&amp; !visited[a][b])
                    res += CalcPeri(grid, a, b);
            } <span style="color:#fff;font-weight:bold">else</span>
                --peri;
        }
        <span style="color:#fff;font-weight:bold">return</span> res + peri;
    }

    <span style="color:#fff;font-weight:bold">void</span> Contain(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; &amp;grid, <span style="color:#fff;font-weight:bold">int</span> i, <span style="color:#fff;font-weight:bold">int</span> j) {
        grid[i][j] = <span style="color:#ff0;font-weight:bold">2</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> &amp;d:dir) {
            <span style="color:#fff;font-weight:bold">int</span> a = i + d[<span style="color:#ff0;font-weight:bold">0</span>], b = j + d[<span style="color:#ff0;font-weight:bold">1</span>];
            <span style="color:#fff;font-weight:bold">if</span> (a &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; a &lt; m &amp;&amp; b &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; b &lt; n &amp;&amp; grid[a][b] == <span style="color:#ff0;font-weight:bold">1</span>)
                Contain(grid, a, b);
        }
    }

    <span style="color:#fff;font-weight:bold">void</span> Infect(vector&lt;vector&lt;<span style="color:#fff;font-weight:bold">int</span>&gt;&gt; &amp;grid) {
        vector&lt;pair&lt;<span style="color:#fff;font-weight:bold">int</span>, <span style="color:#fff;font-weight:bold">int</span>&gt;&gt; infect;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; m; ++i)
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> j = <span style="color:#ff0;font-weight:bold">0</span>; j &lt; n; ++j)
                <span style="color:#fff;font-weight:bold">if</span> (grid[i][j] == <span style="color:#ff0;font-weight:bold">1</span>)
                    infect.push_back(pair&lt;<span style="color:#fff;font-weight:bold">int</span>, <span style="color:#fff;font-weight:bold">int</span>&gt;(i, j));
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> &amp;f:infect) {
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">auto</span> &amp;d:dir) {
                <span style="color:#fff;font-weight:bold">int</span> a = f.first + d[<span style="color:#ff0;font-weight:bold">0</span>], b = f.second + d[<span style="color:#ff0;font-weight:bold">1</span>];
                <span style="color:#fff;font-weight:bold">if</span> (a &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; a &lt; m &amp;&amp; b &gt;= <span style="color:#ff0;font-weight:bold">0</span> &amp;&amp; b &lt; n &amp;&amp; grid[a][b] == <span style="color:#ff0;font-weight:bold">0</span>)
                    grid[a][b] = <span style="color:#ff0;font-weight:bold">1</span>;
            }
        }
    }
};
</code></pre></div>
<h4 id="51-n皇后-https-leetcode-cn-com-problems-n-queens"><a href="https://leetcode-cn.com/problems/n-queens/">51 N皇后</a></h4>

<p>很经典的回溯问题，用 DFS 搜索每一种可能直到搜索完最后一行，用当前位置的横纵坐标的和和差分别判断两个对角线上是否有皇后即可。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#fff;font-weight:bold">class</span><span style="color:#f00"> </span>Solution {
<span style="color:#fff;font-weight:bold">public</span>:
    vector&lt;vector&lt;string&gt;&gt; solveNQueens(<span style="color:#fff;font-weight:bold">int</span> n) {
        vector&lt;vector&lt;string&gt;&gt; res;
        string temp = <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>;
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; n; ++i)
            temp += <span style="color:#0ff;font-weight:bold">&#34;.&#34;</span>;
        vector&lt;string&gt; board(n, temp);
        unordered_map&lt;<span style="color:#fff;font-weight:bold">int</span>, <span style="color:#fff;font-weight:bold">bool</span>&gt; left_diagonal, right_diagonal;
        vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt; row(n, <span style="color:#fff;font-weight:bold">false</span>), col(n, <span style="color:#fff;font-weight:bold">false</span>);
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; n; ++i) {
            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> j = <span style="color:#ff0;font-weight:bold">0</span>; j &lt; n; ++j) {
                left_diagonal[i + j] = <span style="color:#fff;font-weight:bold">false</span>;
                right_diagonal[i - j] = <span style="color:#fff;font-weight:bold">false</span>;
            }
        }
        Backtrack(<span style="color:#ff0;font-weight:bold">0</span>, n, board, res, col, left_diagonal, right_diagonal);
        <span style="color:#fff;font-weight:bold">return</span> res;

    }

    <span style="color:#fff;font-weight:bold">void</span> Backtrack(<span style="color:#fff;font-weight:bold">int</span> i, <span style="color:#fff;font-weight:bold">int</span> &amp;n, vector&lt;string&gt; &amp;board, vector&lt;vector&lt;string&gt;&gt; &amp;res,
                   vector&lt;<span style="color:#fff;font-weight:bold">bool</span>&gt; &amp;col, unordered_map&lt;<span style="color:#fff;font-weight:bold">int</span>, <span style="color:#fff;font-weight:bold">bool</span>&gt; &amp;left_diagonal,
                   unordered_map&lt;<span style="color:#fff;font-weight:bold">int</span>, <span style="color:#fff;font-weight:bold">bool</span>&gt; &amp;right_diagonal) {
        <span style="color:#fff;font-weight:bold">if</span> (i == n) {
            res.push_back(board);
            <span style="color:#fff;font-weight:bold">return</span>;
        }
        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">int</span> j = <span style="color:#ff0;font-weight:bold">0</span>; j &lt; n; ++j) {
            <span style="color:#fff;font-weight:bold">if</span> (!col[j] &amp;&amp; !left_diagonal[i + j] &amp;&amp; !right_diagonal[i - j]) {
                col[j] = <span style="color:#fff;font-weight:bold">true</span>;
                left_diagonal[i + j] = <span style="color:#fff;font-weight:bold">true</span>;
                right_diagonal[i - j] = <span style="color:#fff;font-weight:bold">true</span>;
                board[i][j] = <span style="color:#0ff;font-weight:bold">&#39;Q&#39;</span>;
                Backtrack(i + <span style="color:#ff0;font-weight:bold">1</span>, n, board, res, col, left_diagonal, right_diagonal);
                board[i][j] = <span style="color:#0ff;font-weight:bold">&#39;.&#39;</span>;
                col[j] = <span style="color:#fff;font-weight:bold">false</span>;
                left_diagonal[i + j] = <span style="color:#fff;font-weight:bold">false</span>;
                right_diagonal[i - j] = <span style="color:#fff;font-weight:bold">false</span>;
            }
        }
    }
};
</code></pre></div>
      </div>

      <footer>
        


        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "zintrulcre" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </footer>
    </article>

    
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
    
    
    
      
      <a href="https://github.com/luizdepra/hugo-coder/tree/"></a>
    
  </section>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
    </main>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-132809676-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


  </body>

</html>
